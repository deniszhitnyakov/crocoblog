<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		

		<title>Настройка прокладки</title>

		
		<link rel="stylesheet" href="https://deniszhitnyakov.github.io/crocoblog/public/css/colors-gray.min.db04be02fe387d291ba1210d18f79b848f45c5b4b6422da04e2a97716683349f.css">

		
	</head>
	<body>
		<header id="header">
			<h1><a href="https://deniszhitnyakov.github.io/crocoblog/public/">Croco Blog</a></h1>
			<p></p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
	
		<ul class="nav">
			
				<li><a href="/crocoblog/public/"><span>Posts</span></a></li>
			
		</ul>
	
</nav>

			</div>

			<div id="content">
				
	<article class="post">
		<h1><a href="https://deniszhitnyakov.github.io/crocoblog/public/posts/github-new-prelander/">Настройка прокладки</a> </h1>

		<div class="post-content">

<h2 id="1-добавление-небходимых-скриптов">1. Добавление небходимых скриптов</h2>

<p>1.1 Перед закрывающим <code>&lt;/body&gt;</code> добавить:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- НЕОБХОДИМЫЕ СКРИПТЫ --&gt;</span>
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js&#34;</span> <span style="color:#a6e22e">integrity</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=&#34;</span> <span style="color:#a6e22e">crossorigin</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;anonymous&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/js-url/2.5.3/url.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<p>1.2 После этого добавить:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- ЗАПИСЬ ПИКСЕЛЯ В COOKIES --&gt;</span>
&lt;<span style="color:#f92672">script</span>&gt;
	<span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">function</span>() {
		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">url</span>(<span style="color:#e6db74">&#39;?pixel&#39;</span>)) <span style="color:#a6e22e">Cookies</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#39;pixel&#39;</span>, <span style="color:#a6e22e">url</span>(<span style="color:#e6db74">&#39;?pixel&#39;</span>), {<span style="color:#a6e22e">expires</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>});
	});
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<h2 id="2-добавление-скрипта-трекера">2. Добавление скрипта трекера</h2>

<p>После необходимых скриптов добавить:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- DOLPHIN ТРЕКЕР --&gt;</span>
&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://beta.dolphin.ru.com/js/tracker.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<h2 id="3-получение-ip-посетителя">3. Получение IP посетителя</h2>

<p>После скрипта трекера добавить:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- ПОЛУЧЕНИЕ IP ПОСЕТИТЕЛЯ --&gt;</span>
&lt;<span style="color:#f92672">script</span>&gt;
    <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">getJSON</span>(<span style="color:#e6db74">&#34;http://gd.geobytes.com/GetCityDetails?callback=?&#34;</span>,<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">t</span>){window.<span style="color:#a6e22e">ip</span><span style="color:#f92672">=</span><span style="color:#a6e22e">t</span>.<span style="color:#a6e22e">geobytesremoteip</span>});
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<h2 id="4-добавление-формы-заказа">4. Добавление формы заказа</h2>

<p>4.1 Добавить блоки формы на странице</p>

<p>Добавить форму можно сколько угодно раз. Для этого в нужных местах страницы нужно добавить один и тот же код:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;prelander-form&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;</code></pre></div>

<p>4.2 Добавить скрипт создания формы</p>

<p>После скрипта получения IP адреса добавить:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- СОЗДАНИЕ ФОРМ --&gt;</span>
&lt;<span style="color:#f92672">script</span>&gt;
    <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">function</span> () {
        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>(<span style="color:#e6db74">&#39;https://beta.dolphin.ru.com/widgets/prelander-form.php&#39;</span>, {
            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;post&#39;</span>,
            <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> {
                <span style="color:#a6e22e">offer_name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;НАЗВАНИЕ ОФФЕРА&#39;</span>,
                <span style="color:#a6e22e">price</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">196</span>,
                <span style="color:#a6e22e">currency</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;руб&#39;</span>
            },
            <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">formHtml</span>) {
                <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;div.prelander-form&#39;</span>).<span style="color:#a6e22e">each</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">i</span>, <span style="color:#a6e22e">div</span>) {
                    <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">div</span>).<span style="color:#a6e22e">html</span>( <span style="color:#a6e22e">formHtml</span> );
                });
                <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">getScript</span>(<span style="color:#e6db74">&#39;https://beta.dolphin.ru.com/widgets/prelander-form-countdown.js&#39;</span>);
                <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;head&#39;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;&lt;link rel=&#34;stylesheet&#34; href=&#34;https://beta.dolphin.ru.com/widgets/prelander-form.css&#34; type=&#34;text/css&#34; /&gt;&#39;</span>);
            }
        })
    });
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<h2 id="5-добавить-обработчик-формы">5. Добавить обработчик формы</h2>

<p>Everad</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- ИНТЕГРАЦИЯ С ПП --&gt;</span>
&lt;<span style="color:#f92672">script</span>&gt;
    <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;body&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;submit&#39;</span>, <span style="color:#e6db74">&#39;form&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
        <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>();

        <span style="color:#a6e22e">form</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>;
        <span style="color:#a6e22e">button</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;button[type=&#34;submit&#34;]&#39;</span>);
        <span style="color:#a6e22e">buttonText</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">button</span>).<span style="color:#a6e22e">text</span>();

        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">button</span>).<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#39;Обработка...&#39;</span>);

        <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {
            <span style="color:#a6e22e">fullName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;input[name=&#34;name&#34;]&#39;</span>).<span style="color:#a6e22e">val</span>(),
            <span style="color:#a6e22e">campaign_id</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">906780</span>,
            <span style="color:#a6e22e">ip</span><span style="color:#f92672">:</span> window.<span style="color:#a6e22e">ip</span>,
            <span style="color:#a6e22e">phone</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;input[name=&#34;phone&#34;]&#39;</span>).<span style="color:#a6e22e">val</span>(),
            <span style="color:#a6e22e">country_code</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;RU&#39;</span>,
            <span style="color:#a6e22e">click_id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">Cookies</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;click_id&#39;</span>)
        };

        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">fullName</span>) {
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Заполните ФИО!&#39;</span>);
            <span style="color:#66d9ef">return</span>;
        }

        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">phone</span>) {
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Введите телефон!&#39;</span>);
            <span style="color:#66d9ef">return</span>;
        }

        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>);

        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>(<span style="color:#e6db74">&#39;https://beta.dolphin.ru.com/everad.php&#39;</span>, {
            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;post&#39;</span>,
            <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">data</span>,
            <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">r</span>) {
                <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">button</span>).<span style="color:#a6e22e">text</span>(<span style="color:#a6e22e">buttonText</span>);
                <span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;thanks.html&#39;</span>;
            }
        });
    });
});
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>

<p>M4Leads</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#75715e">&lt;!-- ИНТЕГРАЦИЯ С ПП --&gt;</span>
&lt;<span style="color:#f92672">script</span>&gt;
	<span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">function</span>() {
    <span style="color:#a6e22e">$</span>(<span style="color:#e6db74">&#39;body&#39;</span>).<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;submit&#39;</span>, <span style="color:#e6db74">&#39;form&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
        <span style="color:#a6e22e">e</span>.<span style="color:#a6e22e">preventDefault</span>();

        <span style="color:#a6e22e">form</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span>;
        <span style="color:#a6e22e">button</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;button[type=&#34;submit&#34;]&#39;</span>);
        <span style="color:#a6e22e">buttonText</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">button</span>).<span style="color:#a6e22e">text</span>();

        <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">button</span>).<span style="color:#a6e22e">text</span>(<span style="color:#e6db74">&#39;Обработка...&#39;</span>);

        <span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span> {
            <span style="color:#a6e22e">fullName</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;input[name=&#34;name&#34;]&#39;</span>).<span style="color:#a6e22e">val</span>(),
            <span style="color:#a6e22e">offerId</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">322</span>,
            <span style="color:#a6e22e">phone</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;input[name=&#34;phone&#34;]&#39;</span>).<span style="color:#a6e22e">val</span>(),
            <span style="color:#a6e22e">partnerId</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">293895</span>,
            <span style="color:#e6db74">&#39;access-token&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;71c437d5bf75a76ff5d89c24b567f047&#39;</span>,
            <span style="color:#a6e22e">country</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;KZ&#39;</span>,
            <span style="color:#a6e22e">price</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
            <span style="color:#a6e22e">sub_id</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;dolphin&#39;</span>, <span style="color:#a6e22e">Cookies</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#39;click_id&#39;</span>)]
        };

        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">fullName</span>) {
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Заполните ФИО!&#39;</span>);
            <span style="color:#66d9ef">return</span>;
        }

        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">phone</span>) {
            <span style="color:#a6e22e">alert</span>(<span style="color:#e6db74">&#39;Введите телефон!&#39;</span>);
            <span style="color:#66d9ef">return</span>;
        }

        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">data</span>);

        <span style="color:#a6e22e">$</span>.<span style="color:#a6e22e">ajax</span>(<span style="color:#e6db74">&#39;https://api.m4leads.com/order/add&#39;</span>, {
            <span style="color:#a6e22e">method</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;get&#39;</span>,
            <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">data</span>,
            <span style="color:#a6e22e">success</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">r</span>) {
                <span style="color:#a6e22e">$</span>(<span style="color:#a6e22e">button</span>).<span style="color:#a6e22e">text</span>(<span style="color:#a6e22e">buttonText</span>);
                <span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;thanks.html&#39;</span>;
            }
        })
    });
});
&lt;/<span style="color:#f92672">script</span>&gt;</code></pre></div>
</div>

		<p class="meta">Posted on <span class="postdate">25. October 2019</span></p>
	</article>

			</div>

			<footer id="footer">
				<p class="copyright">
					
						Powered by <a href="https://gohugo.io/">Hugo</a> and the
						<a href="https://github.com/bake/solar-theme-hugo">Solar</a>-theme.
					
				</p>
			</footer>
		</div>

		
	</body>
</html>
